{"version":3,"sources":["../../src/axes_editor.js"],"names":["axesEditorComponent","restrict","scope","templateUrl","controller","AxesEditorCtrl","kbn","$scope","$q","panelCtrl","ctrl","panel","unitFormats","getUnitFormats","logScales","xAxisModes","xAxisStatOptions","text","value","xaxis","mode","name","axis","subItem","format","render","values","processor","setPanelDefaultsForNewXAxisMode","onDataReceived","dataList","onlyNumbers","props","getDataFieldNames","items","map","prop","when"],"mappings":";;;;;;;;;;;;;AAwEA;AACO,WAASA,mBAAT,GAA+B;AACpC;;AACA,WAAO;AACLC,gBAAU,GADL;AAELC,aAAO,IAFF;AAGLC,mBAAa,+CAHR;AAILC,kBAAYC;AAJP,KAAP;AAMD;;iCAReL,mB;;;;AAvETM,S;;;;;;;;;;;;;;;;;;;;;gCAEMD,c;;AAEX;AACA,gCAAYE,MAAZ,EAAoBC,EAApB,EAAwB;AAAA;;AACtB,eAAKC,SAAL,GAAiBF,OAAOG,IAAxB;AACA,eAAKC,KAAL,GAAa,KAAKF,SAAL,CAAeE,KAA5B;AACAJ,iBAAOG,IAAP,GAAc,IAAd;;AAEA,eAAKE,WAAL,GAAmBN,IAAIO,cAAJ,EAAnB;;AAEA,eAAKC,SAAL,GAAiB;AACf,sBAAU,CADK;AAEf,4BAAgB,CAFD;AAGf,6BAAiB,EAHF;AAIf,6BAAiB,EAJF;AAKf,+BAAmB;AALJ,WAAjB;;AAQA,eAAKC,UAAL,GAAkB;AAChB,oBAAQ,MADQ;AAEhB,sBAAU,QAFM;AAGhB,yBAAa;AACb;AAJgB,WAAlB;;AAOA,eAAKC,gBAAL,GAAyB,CACvB,EAACC,MAAM,KAAP,EAAcC,OAAO,KAArB,EADuB,EAEvB,EAACD,MAAM,KAAP,EAAcC,OAAO,KAArB,EAFuB,EAGvB,EAACD,MAAM,KAAP,EAAcC,OAAO,KAArB,EAHuB,EAIvB,EAACD,MAAM,OAAP,EAAgBC,OAAO,OAAvB,EAJuB,EAKvB,EAACD,MAAM,OAAP,EAAgBC,OAAO,OAAvB,EALuB,EAMvB,EAACD,MAAM,SAAP,EAAkBC,OAAO,SAAzB,EANuB,CAAzB;;AASA,cAAI,KAAKP,KAAL,CAAWQ,KAAX,CAAiBC,IAAjB,KAA0B,QAA9B,EAAwC;AACtC,gBAAI,CAAC,KAAKT,KAAL,CAAWQ,KAAX,CAAiBE,IAAtB,EAA4B;AAC1B,mBAAKV,KAAL,CAAWQ,KAAX,CAAiBE,IAAjB,GAAwB,eAAxB;AACD;AACF;AACF;;;;wCAEaC,I,EAAMC,O,EAAS;AAC3BD,iBAAKE,MAAL,GAAcD,QAAQL,KAAtB;AACA,iBAAKT,SAAL,CAAegB,MAAf;AACD;;;mCAEQ;AACP,iBAAKhB,SAAL,CAAegB,MAAf;AACD;;;+CAEqB;AACpB,gBAAI,CAAC,KAAKd,KAAL,CAAWQ,KAAX,CAAiBO,MAAlB,IAA4B,CAAC,KAAKf,KAAL,CAAWQ,KAAX,CAAiBO,MAAjB,CAAwB,CAAxB,CAAjC,EAA4D;AAC1D,mBAAKjB,SAAL,CAAekB,SAAf,CAAyBC,+BAAzB;AACD;AACD,iBAAKnB,SAAL,CAAeoB,cAAf,CAA8B,KAAKpB,SAAL,CAAeqB,QAA7C;AACD;;;4CAEiBC,W,EAAa;AAC7B,gBAAIC,QAAQ,KAAKvB,SAAL,CAAekB,SAAf,CAAyBM,iBAAzB,CAA2C,KAAKxB,SAAL,CAAeqB,QAA1D,EAAoEC,WAApE,CAAZ;AACA,gBAAIG,QAAQF,MAAMG,GAAN,CAAU,gBAAQ;AAC5B,qBAAO,EAAClB,MAAMmB,IAAP,EAAalB,OAAOkB,IAApB,EAAP;AACD,aAFW,CAAZ;;AAIA,mBAAO,KAAK5B,EAAL,CAAQ6B,IAAR,CAAaH,KAAb,CAAP;AACD","file":"axes_editor.js","sourcesContent":["///<reference path=\"../../../headers/common.d.ts\" />\n\nimport kbn from 'app/core/utils/kbn';\n\nexport class AxesEditorCtrl {\n\n  /** @ngInject **/\n  constructor($scope, $q) {\n    this.panelCtrl = $scope.ctrl;\n    this.panel = this.panelCtrl.panel;\n    $scope.ctrl = this;\n\n    this.unitFormats = kbn.getUnitFormats();\n\n    this.logScales = {\n      'linear': 1,\n      'log (base 2)': 2,\n      'log (base 10)': 10,\n      'log (base 32)': 32,\n      'log (base 1024)': 1024\n    };\n\n    this.xAxisModes = {\n      'Time': 'time',\n      'Series': 'series',\n      'Histogram': 'histogram'\n      // 'Data field': 'field',\n    };\n\n    this.xAxisStatOptions =  [\n      {text: 'Avg', value: 'avg'},\n      {text: 'Min', value: 'min'},\n      {text: 'Max', value: 'max'},\n      {text: 'Total', value: 'total'},\n      {text: 'Count', value: 'count'},\n      {text: 'Current', value: 'current'},\n    ];\n\n    if (this.panel.xaxis.mode === 'custom') {\n      if (!this.panel.xaxis.name) {\n        this.panel.xaxis.name = 'specify field';\n      }\n    }\n  }\n\n  setUnitFormat(axis, subItem) {\n    axis.format = subItem.value;\n    this.panelCtrl.render();\n  }\n\n  render() {\n    this.panelCtrl.render();\n  }\n\n  xAxisOptionChanged()  {\n    if (!this.panel.xaxis.values || !this.panel.xaxis.values[0]){\n      this.panelCtrl.processor.setPanelDefaultsForNewXAxisMode();\n    }\n    this.panelCtrl.onDataReceived(this.panelCtrl.dataList);\n  }\n\n  getDataFieldNames(onlyNumbers) {\n    var props = this.panelCtrl.processor.getDataFieldNames(this.panelCtrl.dataList, onlyNumbers);\n    var items = props.map(prop => {\n      return {text: prop, value: prop};\n    });\n\n    return this.$q.when(items);\n  }\n\n}\n\n/** @ngInject **/\nexport function axesEditorComponent() {\n  'use strict';\n  return {\n    restrict: 'E',\n    scope: true,\n    templateUrl: 'public/plugins/calcgraph/tpl/axes_editor.html',\n    controller: AxesEditorCtrl,\n  };\n}\n"]}